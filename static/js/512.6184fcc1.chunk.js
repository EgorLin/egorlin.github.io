"use strict";(self.webpackChunkanime_app=self.webpackChunkanime_app||[]).push([[512],{2332:function(e,n,t){t.r(n),t.d(n,{default:function(){return me}});var r=t(2791),i=t(7689);function a(e,n){return e.length===n.length&&n.every((function(n,t){return e[t].id===n.id}))}var s=t(8660),o=t(3277),c=t(3433),l=t(4165),d=t(5861),u=t(9439),m=t(9603),p=t(9115),v={comment:"Comment_comment__gE9ng",info:"Comment_info__gKytC",infoText:"Comment_infoText__zhREY",username:"Comment_username__zSL7q",text:"Comment_text__jIBrx"},h=t(184);var x=function(e){var n=e.comment;return(0,h.jsxs)("div",{className:v.comment,children:[(0,h.jsxs)("div",{className:v.info,children:[(0,h.jsx)("img",{src:n.imageUrl,alt:""}),(0,h.jsxs)("div",{className:v.infoText,children:[(0,h.jsx)("div",{className:v.username,children:n.username}),(0,h.jsxs)("div",{children:[" ",new Date(n.date).toLocaleString()]})]})]}),(0,h.jsx)("div",{className:v.text,children:n.text})]})};var f=function(e){var n=e.comment;return(0,h.jsx)(x,{comment:n})},j=t(5689),g=t(9434),_=t(8681),y=t(1087),C=t(116),I={container:"CommentInput_container__0fY-X",logIn:"CommentInput_logIn__cepjr",button:"CommentInput_button__1GQah",disabledButton:"CommentInput_disabledButton__i6xJQ"};var E=function(e){var n=e.isAuth,t=e.text,r=e.updateComment,i=e.sendNewComment;return(0,h.jsx)("div",{className:I.container,children:n?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("textarea",{rows:6,maxLength:1e4,placeholder:"Leave a comment...",value:t,onChange:function(e){return r(e.target.value)}}),(0,h.jsx)("button",{onClick:i,disabled:0===t.length,className:[I.button,0===t.length?I.disabledButton:""].join(" "),children:"send"})]}):(0,h.jsxs)("span",{children:["Please,"," ",(0,h.jsx)(y.rU,{to:C.n8.LOGIN,children:(0,h.jsx)("span",{className:I.logIn,children:"log in"})})," ","to leave a comment"]})})};var D=function(e){var n,t=e.animeId,i=e.comments,a=e.fetchData,s=(0,g.v9)(_.HF).isAuth,o=(0,r.useState)(""),c=(0,u.Z)(o,2),l=c[0],d=c[1],p=null===(n=(0,j.v0)().currentUser)||void 0===n?void 0:n.uid;return(0,h.jsx)(E,{isAuth:s,text:l,updateComment:function(e){d(e)},sendNewComment:function(){i?m.Z.addNewComment(t,p,Date.now(),l):m.Z.addFirstComment(t,p,Date.now(),l),d(""),a()}})};var N=function(e){var n=e.animeId,t=e.fetchData,r=e.comments,i=e.status;return(0,h.jsxs)("div",{className:"wrapperM",children:[(0,h.jsx)(D,{animeId:n,comments:r,fetchData:t}),i===p.Q.SUCCEEDED&&(0,h.jsx)("div",{children:null===r||void 0===r?void 0:r.map((function(e){return(0,h.jsx)(f,{comment:e},String(e.date))}))})]})};var w=function(e){var n=e.animeId,t=(0,r.useState)(),i=(0,u.Z)(t,2),a=i[0],s=i[1],o=(0,r.useState)(p.Q.IDLE),v=(0,u.Z)(o,2),x=v[0],f=v[1];function j(){return g.apply(this,arguments)}function g(){return(g=(0,d.Z)((0,l.Z)().mark((function e(){var t,r,i,a,o,d,u,v;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(p.Q.LOADING),e.next=3,m.Z.getCommentsData(n);case 3:if(!(t=e.sent)){e.next=23;break}r=new Set,t.comments.forEach((function(e){return r.add(e.uid)})),i=new Map,a=0,o=Array.from(r);case 9:if(!(a<o.length)){e.next=18;break}return d=o[a],e.next=13,m.Z.getUserData(d);case 13:(u=e.sent)&&i.set(d,u);case 15:a++,e.next=9;break;case 18:v=t.comments.map((function(e){var n=i.get(e.uid);return{uid:e.uid,username:n.username,imageUrl:n.imageUrl,date:e.date,text:e.text}})),s((0,c.Z)(v).reverse()),f(p.Q.SUCCEEDED),e.next=24;break;case 23:f(p.Q.FAILED);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.useEffect)((function(){j()}),[]),(0,h.jsx)(N,{animeId:n,comments:a,fetchData:j,status:x})},S=t(1533),Z={icon:"StarIcon_icon__68GTi"};var b=function(){return(0,h.jsx)("svg",{className:Z.icon,viewBox:"0 0 1920 1920",children:(0,h.jsx)("path",{d:"M1306.181 1110.407c-28.461 20.781-40.32 57.261-29.477 91.03l166.136 511.398-435.05-316.122c-28.686-20.781-67.086-20.781-95.66 0l-435.05 316.122 166.25-511.623c10.842-33.544-1.017-70.024-29.591-90.805L178.577 794.285h537.825c35.351 0 66.523-22.701 77.365-56.245l166.25-511.51 166.136 511.397a81.155 81.155 0 0 0 77.365 56.358h537.939l-435.276 316.122Zm609.77-372.819c-10.956-33.656-42.014-56.244-77.365-56.244h-612.141l-189.064-582.1C1026.426 65.589 995.367 43 960.017 43c-35.351 0-66.523 22.588-77.365 56.245L693.475 681.344H81.335c-35.351 0-66.41 22.588-77.366 56.244-10.842 33.657 1.017 70.137 29.591 90.918l495.247 359.718-189.29 582.211c-10.842 33.657 1.017 70.137 29.704 90.918 14.23 10.39 31.059 15.586 47.661 15.586 16.829 0 33.657-5.195 47.887-15.699l495.248-359.718 495.02 359.718c28.575 20.894 67.088 20.894 95.775.113 28.574-20.781 40.433-57.261 29.59-91.03l-189.289-582.1 495.247-359.717c28.687-20.781 40.546-57.261 29.59-90.918Z",fillRule:"evenodd"})})},k={container:"Details_container__W8tgr",content:"Details_content__i3OEA",trailerContainer:"Details_trailerContainer__dIrwl",trailerIcon:"Details_trailerIcon__5gYcI",shortDetails:"Details_shortDetails__R6GU-",rating:"Details_rating__QK5yq",separator:"Details_separator__dhwwP",description:"Details_description__46UvO"};var L=function(e){var n=e.animeInfo;return(0,h.jsxs)("div",{className:k.container,children:[(0,h.jsx)("img",{src:n.cover,alt:""}),(0,h.jsxs)("div",{className:[k.content,"wrapperM"].join(" "),children:[n.trailer&&(0,h.jsx)("div",{children:(0,h.jsxs)(y.OL,{to:"https://www."+(null===n||void 0===n?void 0:n.trailer.site)+".com/watch?v="+(null===n||void 0===n?void 0:n.trailer.id),target:"_blank",className:k.trailerContainer,children:[(0,h.jsx)(S.Z,{className:k.trailerIcon})," ",(0,h.jsx)("span",{children:"Trailer"})]})}),(0,h.jsx)("h1",{children:null===n||void 0===n?void 0:n.title.english}),(0,h.jsxs)("div",{className:k.shortDetails,children:[n.rating&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("span",{className:k.rating,children:[(0,h.jsx)(b,{})," ",null===n||void 0===n?void 0:n.rating]}),(0,h.jsx)("span",{className:k.separator,children:"|"})," "]}),n.genres.length>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{children:null===n||void 0===n?void 0:n.genres[0]}),(0,h.jsx)("span",{className:k.separator,children:"|"})," "]}),n.releaseDate&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{children:null===n||void 0===n?void 0:n.releaseDate}),(0,h.jsx)("span",{className:k.separator,children:"|"})]}),n.status&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{children:null===n||void 0===n?void 0:n.status}),(0,h.jsx)("span",{className:k.separator,children:"|"})]}),n.currentEpisode&&n.totalEpisodes&&(0,h.jsx)("span",{children:(null===n||void 0===n?void 0:n.currentEpisode)+"/"+(null===n||void 0===n?void 0:n.totalEpisodes)})]}),(0,h.jsx)("div",{className:k.description,dangerouslySetInnerHTML:{__html:null!==n&&void 0!==n&&n.description?null===n||void 0===n?void 0:n.description:""}})]})]})};var A=function(e){var n=e.animeInfo;return(0,h.jsx)(L,{animeInfo:n})},Q="https://m3u8proxy.nothinginteresting.workers.dev/?url=",F=t(3791),T=t(9594),U=t(1413),z=t(4925),B=t(7935),M=t.n(B),P=t(9843),G=t.n(P),O=["option","getInstance"];function R(e,n,t){if(G().isSupported()){var r=new(G());r.loadSource(n),r.attachMedia(e),t.once("url",(function(){return r.destroy()})),t.once("destroy",(function(){return r.destroy()}))}else e.canPlayType("application/vnd.apple.mpegurl")?e.src=n:t.notice.show="Unsupported playback format: m3u8"}var H=function(e){var n=e.option,t=e.getInstance,i=(0,z.Z)(e,O),a=(0,r.useRef)(null);return(0,r.useEffect)((function(){var e=new(M())((0,U.Z)((0,U.Z)({},n),{},{container:a.current?a.current:"",theme:"#2f80ed",type:"m3u8",setting:!0,playbackRate:!0,fullscreen:!0,customType:{m3u8:R}}));return t&&"function"===typeof t&&t(e),function(){e&&e.destroy&&e.destroy(!1)}}),[]),(0,h.jsx)("div",(0,U.Z)({ref:a},i))};var q=function(e){var n,t=e.animeId,i=e.className,a=e.poster,o=e.spinnerContainerSize,c=(0,s.T)(),l=(0,s.C)((function(e){return e.streamInfo})),d=l.data,u=l.status,m=l.error;switch((0,r.useEffect)((function(){c((0,F.T8)(t))}),[t]),u){case p.Q.IDLE:n=(0,h.jsx)(h.Fragment,{});break;case p.Q.LOADING:n=(0,h.jsx)(T.Z,{containerSize:o});break;case p.Q.SUCCEEDED:n=(0,h.jsx)(H,{option:{url:Q+d.sources[3].url,container:".artplayer-container",poster:Q+a,quality:d.sources.filter((function(e){return e.quality.match(/\d[p]/)})).map((function(e){return{html:e.quality,url:Q+e.url}}))},getInstance:function(){},className:i});break;case p.Q.FAILED:n=(0,h.jsx)("div",{children:m})}return(0,h.jsx)(h.Fragment,{children:n})},W=t(5176),X=t(244);var Y=function(e){var n=e.children,t=(0,r.useState)(!1),i=(0,u.Z)(t,2),a=i[0],s=i[1],o=(0,W.S)((function(){s(!0)}));return a?n:(0,h.jsx)(X.Z,{target:o})},J=t(3832),K=t(8657);var V=function(e){var n=e.title,t=e.id,r=e.image,i=e.number,a=e.applyNewEpisode,s=e.isActive,o=(0,h.jsx)(J.Z,{children:i}),c={english:n,romaji:"",native:""};return(0,h.jsx)(K.Z,{animeId:"",imageSize:K.X.WIDE,isMainContentIn:!0,visibleRightCorner:!0,title:c,image:r,rightCornerContent:o,onClick:function(){a(t)},hasGlowing:s})},$=t(8784);var ee=function(e){var n=e.episodes,t=e.current,r=e.applyNewEpisode;return(0,h.jsx)($.Z,{elements:n.map((function(e){return(0,h.jsx)(V,{id:e.id,title:e.title,number:e.number,image:e.image,applyNewEpisode:r,isActive:t===e.id})}))})},ne={player:"EpisodeSection_player__2zBNH",spinnerPlayerSize:"EpisodeSection_spinnerPlayerSize__eZ6D6"};var te=function(e){var n=e.episodes,t=e.currentEpisode,r=e.applyNewEpisode;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(q,{animeId:t.id,poster:t.image,className:[ne.player,"wrapperM"].join(" "),spinnerContainerSize:ne.spinnerPlayerSize}),(0,h.jsx)(Y,{children:(0,h.jsx)(ee,{episodes:n,current:t.id,applyNewEpisode:r})})]})};var re=function(e){var n=e.episodes,t=(0,r.useState)(n[0]),i=(0,u.Z)(t,2),a=i[0],s=i[1];return(0,h.jsx)(te,{episodes:n,currentEpisode:a,applyNewEpisode:function(e){var t=n.find((function(n){return n.id===e}));t&&s(t)}})},ie=t(9737),ae=t(5072);var se=function(e){var n=e.title,t=e.id,r=e.image,i=e.type,a=e.rating,s=(0,ie.Z)(t),o=(0,h.jsxs)(ae.Z,{roundedCorners:!0,children:[(0,h.jsx)(b,{})," ",a]}),c=[];return i&&c.push(i),(0,h.jsx)(K.Z,{animeId:t+"",imageSize:K.X.SMALL,hasBookmark:!0,hasPlayButton:!0,title:n,image:r,list:c,rightCornerContent:o,onClick:s})};var oe=function(e){var n=e.recommendations;return(0,h.jsx)($.Z,{title:"Recommendations",elements:n.map((function(e){return(0,h.jsx)(se,{id:e.id,title:e.title,type:e.type,image:e.image,rating:e.rating})}))})};var ce=function(e){var n=e.title,t=e.id,r=e.image,i=e.type,a=e.relationType,s=(0,ie.Z)(t),o=[i,a];return(0,h.jsx)(K.Z,{animeId:t+"",imageSize:K.X.SMALL,hasBookmark:!0,hasPlayButton:!0,title:n,image:r,list:o,onClick:s})};var le=function(e){var n=e.relations;return(0,h.jsx)($.Z,{title:"Relations",elements:n.map((function(e){return(0,h.jsx)(ce,{id:e.id,title:e.title,type:e.type,image:e.image,relationType:e.relationType})}))})},de={spinnerHeight:"AnimePage_spinnerHeight__Ut9WJ",sorry:"AnimePage_sorry__m2f0u"};var ue=function(e){var n,t=e.animeStatus,r=e.animeInfo,i=e.animeError,a=e.relations,s=r.episodes,o=r.recommendations;switch(t){case p.Q.IDLE:n=(0,h.jsx)(h.Fragment,{});break;case p.Q.SUCCEEDED:n=(0,h.jsxs)("div",{children:[(0,h.jsx)(A,{animeInfo:r}),s.length>0?(0,h.jsx)(re,{episodes:(0,c.Z)(s).reverse()}):(0,h.jsx)("div",{className:de.sorry,children:"This anime isn't available for watching. We are sorry"}),a.length>0&&(0,h.jsx)(Y,{children:(0,h.jsx)(le,{relations:a})}),o.length>0&&(0,h.jsx)(Y,{children:(0,h.jsx)(oe,{recommendations:o})}),(0,h.jsx)(Y,{children:(0,h.jsx)(w,{animeId:r.id})})]});break;case p.Q.LOADING:n=(0,h.jsx)(T.Z,{containerSize:de.spinnerHeight});break;case p.Q.FAILED:n=(0,h.jsx)("div",{children:i})}return(0,h.jsx)("div",{children:n})};var me=function(){var e=(0,s.T)(),n=(0,i.UO)().id,t=(0,s.C)(o.rj),c=t.data,l=t.error,d=t.status,u=(0,s.C)(o.Fd,a);return(0,r.useEffect)((function(){e((0,o.lm)(String(n)))}),[n]),(0,h.jsx)(ue,{animeStatus:d,animeError:l,animeInfo:c,relations:u})}}}]);
//# sourceMappingURL=512.6184fcc1.chunk.js.map